# A股智能量化投研平台 - 版本日志

本文档记录了平台从V1.0版本开始的核心功能迭代与架构演进历史。

---

### **V3.0 - “云原生与大规模回测” (规划中)**

* **核心愿景:** 拥抱云原生技术，构建能够处理海量数据、支持超大规模并行回测的下一代量化基础设施。
* **关键任务:**
    * **容器化与服务网格:** 将所有服务（数据、策略、回测）全面容器化（Docker），并使用 Kubernetes (K8s) 进行编排，实现弹性伸缩与高可用。
    * **分布式回测引擎:** 重构回测框架，利用 Celery 或 Ray 实现任务分发，支持在云端同时对数千个策略参数组合进行大规模并行回测。
    * **数据湖与流处理:** 引入基于对象存储（如 S3）的数据湖方案，并结合 Flink 或 Spark Streaming 实现对实时行情数据的流式处理与特征计算。
    * **CI/CD 与 GitOps:** 建立完整的持续集成/持续部署（CI/CD）流水线，实现代码提交后自动化的测试、构建和部署，拥抱 GitOps 理念。
    
---

### **V2.4 - “智能化深化与实战模拟” (已实现)**

* **核心愿景:** 将平台从“历史数据投研系统”，升级为“准实盘级仿真决策平台”。
* **关键交付:**
    * **数据维度深化:** 引入分钟级高频数据（通过 `AkShare`），并为核心接口建立双数据源获取机制。
    * **AI策略大脑进化:** 构建了 `LSTMAlphaStrategy` 策略框架，为集成时序深度学习模型奠定基础；并开发了 `triggered_analysis_workflow`，实现了“量化信号触发式”的AI分析模式，有效降本增效。
    * **高保真决策支持:** 新增了 `generate_pre_market_plan` 函数和“智能决策”前端模块，可自动生成结构化的“盘前交易计划”，并为盘后复盘（TBA）预留了接口。

---

### **V2.3 - “策略实战与智能风控” (已实现)**

* **核心愿景:** 将平台强大的内部能力全面“对外实战化”，从“选股”升级到“构建组合”和“管理风险”的实战高度。
* **关键交付:**
    * **机器学习引擎激活:** 新增“模型训练室”UI，将 `MLAlphaStrategy` (LGBM) 正式集成到回测实验室。
    * **投资组合级风险管理:** 创建 `RiskManager` 类，用于分析组合在市值、估值、动量等风险因子上的暴露度，并在回测结果中可视化。
    * **自动化策略全流程:** 创建 `run_strategy_daily.py` 脚本，串联策略执行、风险分析和AI报告，每日自动生成《AI投研晨报》，并在“策略看板”中展示。

---

### **V2.2 - “架构优化与深度集成” (已实现)**

* **核心愿景:** 对系统进行深刻的架构性优化和功能性集成，提升扩展性、效率和深度。
* **关键交付:**
    * **数据库架构优化 (“万表归一”):** 创建 `migrate_fina_data.py`，将分散的财务指标表 (`fina_indicator_[代码]`) 合并到统一的 `financial_indicators` 主表。
    * **后台流程优化:** 创建 `run_daily_pipeline.py`，将数据抽取和因子计算合并为一个统一、健壮的数据管道，消除文件依赖。
    * **功能深度集成:** 将 `AdaptiveAlphaStrategy` 和 `MLAlphaStrategy` 正式集成到前端“回测实验室”中，供用户选择。

---

### **V2.1 - “多维数据融合” (已实现)**

* **核心愿景:** 系统性地融入财务、筹码、宏观等8个以上的高价值数据维度，构建信息密度更高的投研体系。
* **关键交付:**
    * **扩充数据接口:** 新增对 `业绩预告`, `龙虎榜`, `股东人数`, `分红送股` 等11个新接口的数据获取与存储。
    * **扩充因子库:** 在 `FactorFactory` 中新增 `calc_holder_num_change_ratio` (股东人数变化率)、`calc_dividend_yield` (股息率) 等对应的新因子。
    * **增强AI与UI:** 将新数据作为AI分析的上下文，并在前端相应模块进行可视化展示。

---

### **V2.0 - “宏观-中观-微观”体系建立 (已实现)**

* **核心愿景:** 建立更完整、更强大的“宏观-中观-微观”三位一体的投研体系。
* **关键交付:**
    * **宏观分析与择时:** 开发 `IndexAnalyzer` 模块，用于计算大盘指数的估值百分位，并生成择时信号。
    * **中观行业分析:** 开发 `IndustryAnalyzer` 模块，实现对各行业的估值、景气度等因子的横向对比与排名。
    * **数据库专业化升级:** 规划将数据后端迁移到时序数据库（如 `TimescaleDB`）以提升性能。

---

### **V1.0 - “平台基础奠定” (已实现)**

* **核心愿景:** 构建一个高性能、可扩展、智能化的A股量化投研平台基础框架。
* **关键交付:**
    * **智能数据中心:** 实现了基于 `asyncio` 的异步下载引擎和Point-in-Time (PIT) 财务数据校正。
    * **模块化因子库:** 建立了包含多维度因子的计算函数和科学化的因子预处理流水线。
    * **高级回测框架:** 实现了向量化与事件驱动双回测引擎，并集成了组合优化器和Brinson业绩归因模型。
    * **混合AI智能体:** 搭建了可配置、多模型、多步骤的AI工作流，可自动生成六大维度的综合投研报告。
    * **一体化投研工作台:** 基于 `Streamlit` 构建了全功能的前端交互界面。