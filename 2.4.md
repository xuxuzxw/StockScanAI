### **A股量化投研平台 V2.4 - “智能化深化与实战模拟” 项目规划**



文档版本： 1.0

核心愿景 (Vision): V2.4 的使命是将平台从一个**“历史数据投研系统”，升级为一个“准实盘级仿真决策平台”**。我们将通过引入更高频的数据、更前沿的AI模型、更逼真的交易模拟，以及一套能自我进化的智能运维大脑，无限逼近真实市场的复杂性，从而对策略进行最严苛的压力测试并为实战提供最强有力的决策支持。

------



#### **一、 V2.4 版本四大核心任务模块**



我们将围绕“数据深度”、“AI进化”、“决策支持保真度”和“智能运维”四个方向，推进以下核心任务。



##### **任务模块一：数据维度深化 (Data Dimension Deepening)**



- **目标：** 打破日线数据的限制，引入分钟级高频数据与多数据源验证机制，为日内策略和更精细的交易算法执行奠定坚实基础。
- **实施步骤：**
  1. **引入分钟线数据 (通过AkShare)**:
     - **数据层 (`data.py`)**: 鉴于Tushare积分限制，我们将新增 `get_minute_bar_from_akshare` 方法，专门负责从免费的 `AkShare` 接口获取分钟级别K线数据。同时，在数据库中创建新的 `ts_minute` Hypertable 用于存储。
     - **回填与调度**: 相应地升级 `backfill_data.py` 和 `scheduler.py`，增加对分钟线数据的回填和每日盘后自动更新的支持。
  2. **建立双数据源验证与备份机制**:
     - **数据层 (`data.py`)**: 将 `AkShare` 正式确立为 `Tushare` 的补充和备份数据源。在 `DataManager` 的核心数据获取方法（如 `get_daily`）中实现“主备切换”逻辑：当主数据源Tushare调用失败或返回空数据时，系统会自动尝试从 AkShare 获取相同数据，从而极大增强平台的健壮性和数据完整性。
  3. **舆情数据实时化与合规化**:
     - **智能分析层 (`intelligence.py`)**: 废弃 `config.py` 中的模拟新闻源。引入一个真实的、合规的财经新闻源API（如付费的聚合新闻API或自建的、遵守`robots.txt`和访问频率限制的轻量级爬虫模块），实现对市场舆情的准实时捕捉和分析。



##### **任务模块二：AI 策略大脑进化 (AI Strategy Brain Evolution)**



- **目标：** 将平台的AI能力从“分析与报告”提升到“创造与预测”，引入深度学习模型，并采用量化信号智能触发机制，实现AI算力的降本增效和分析深度的双重突破。
- **实施步骤：**
  1. **引入时序深度学习模型 (LSTM)**:
     - **引擎层 (`quant_engine.py`)**: 升级 `MLAlphaStrategy`，预留 `PyTorch`/`TensorFlow` 接口。增加基于LSTM（长短期记忆网络）的模型选项，专门用于学习因子或价格的时间序列模式，捕捉非线性的动态特征。
     - **UI层 (`app.py`)**: 在“模型训练室”中增加 LSTM 模型选项，并提供相应的时序参数设置（如回看窗口长度 `lookback_period`）。
  2. **实现“量化信号触发式”AI分析 (Quantitative-Triggered AI Analysis)**:
     - **后台工作流 (`run_strategy_daily.py`)**: 在每日策略执行前，增加一个“信号预警”步骤。该步骤会快速扫描全市场，筛选出触发了经典技术信号（如**均线金叉、成交量突破、MACD背离**等）的股票。
     - **智能分析层 (`intelligence.py`)**: 核心AI分析工作流 `full_analysis_workflow` 将被改造，**只有被“信号预警”步骤标记的股票，才会启动后续昂贵的AI深度分析**。
     - **上下文注入 (Context Injection)**: 调用AI的Prompt将被优化，明确告知AI该股触发了何种量化信号，引导AI围绕此信号进行深度归因和解读，从而极大提升分析的相关性和深度。



##### **任务模块三：高保真决策支持 (High-Fidelity Decision Support)**



- **目标：** 根据您的反馈，移除独立的模拟交易功能，转向为您的实战交易提供更紧密、更强大的决策支持闭环。
- **实施步骤：**
  1. **生成结构化“盘前交易计划”**:
     - **后台工作流 (`run_strategy_daily.py`)**: 每日晨报生成后，系统会额外输出一份结构化的“**今日交易计划**”（例如JSON或CSV文件）。该计划将清晰列出基于策略信号的“建议买入”、“建议卖出”、“建议继续持有”的股票列表、目标价位及建议仓位，作为您当日实盘操作的直接参考。
  2. **开发“盘后交易复盘”模块 (UI)**:
     - **UI层 (`app.py`)**: 新增一个“**交易复盘**”页面，允许您在每日收盘后，通过上传券商交易记录截图或手动录入的方式，记录您当日的**实际成交**。
  3. **生成“交易行为分析(TBA)”报告**:
     - **引擎层 (`quant_engine.py`)**: 创建一个新的 `TradingBehaviorAnalyzer` 类。该类会将您的“实际成交”与系统生成的“理论交易计划”进行对比，自动计算并生成一份TBA报告，分析内容包括：
       - **信号遵从度**: 您在多大程度上执行了策略信号？
       - **择时偏差**: 您的买卖点相对于理论信号是提前了还是延迟了？
       - **交易成本分析**: 您的实际滑点和冲击成本估算。
       - 这份报告将帮助您客观评估自身的交易执行能力，并不断优化。



##### **任务模块四：自主MLOps与智能运维大脑 (Autonomous MLOps & Intelligent Ops Brain)**



- **目标：** 将复杂的模型运维工作完全自动化、智能化，您无需成为MLOps专家，平台本身就是。
- **实施步骤：**
  1. **实现模型“自我体检”与“自动康复”**:
     - **后台任务 (`scheduler.py`)**: 新增一个每日运行的“**模型性能哨兵**”任务。该任务会自动用最新的数据验证线上机器学习模型的预测准确率。
     - **智能诊断与再训练**: 当“哨兵”监测到模型性能连续多日低于健康阈值（模型衰退），它将**自动触发再训练流程**，使用最新的全量数据生成一个新版模型，并向您发送通知。
  2. **建立“新老模型”自动竞聘上岗机制**:
     - **后台工作流**: 当新模型被自动训练出来后，系统将启动“**冠军-挑战者 (Champion-Challenger)**”模式。在接下来的一周内，新旧两个模型将并行进行虚拟预测，“战绩”更优的模型将在观察期结束后被**自动部署为新的线上“冠军”模型**。整个过程无需人工干预，您只会收到一份最终的《模型竞聘报告》。
  3. **集成“AI回测分析师”**:
     - **UI层 (`app.py`)**: 在“回测实验室”的结果页面，新增一个**“交由AI分析师复盘”**按钮。
     - **智能分析层 (`intelligence.py`)**: 点击后，系统会将多次回测的结果（参数、性能指标等）打包发送给一个专用的AI分析工作流。AI会像一个经验丰富的基金经理一样，**用自然语言为您总结出核心洞察、发现异常风险，并提出具体的优化建议**，将您从繁琐的报告对比中解放出来。
